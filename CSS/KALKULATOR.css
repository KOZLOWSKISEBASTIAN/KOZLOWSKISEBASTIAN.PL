.KALKULATOR {
  display: grid;
  gap: 7px;
  width: 100%;
  max-height: calc(100svh - 40px);
}

.KALKULATOR_NAGLOWEK { display:flex; justify-content:flex-start; }

.KALKULATOR_WIDOK {
  display: grid;
  grid-template-rows: auto 1fr;
  row-gap: 6px;
  background: var(--TLO-PRZYCISK);
  border: 1px solid var(--TLO-PANEL);
  border-radius: 10px;
  padding: 4px;
  overflow: hidden;
}

.KALKULATOR_LOG {
  display: grid;
  gap: 1px;
  border-bottom: 1px solid var(--TLO-PANEL);
  padding-bottom: 5px;
  text-align: right;
}
.KALKULATOR_LOG_LINIA{
  font-size: calc(clamp(11px, 1.6vw, 18px) * 1.25);
  line-height: 1.25;
  letter-spacing: .2px;
  color: var(--AKCENT-TEKST);
  opacity: .9;
  word-break: break-all;
}

.KALKULATOR_EKRAN {
  display: block;
  width: 100%;
  min-height: clamp(44px, 7vh, 64px);
  padding: 10px 12px;
  border: none;
  background: transparent;
  color: var(--AKCENT-TEKST);
  font-family: 'Poppins', 'Montserrat', sans-serif;
  font-weight: 400;
  font-size: calc(clamp(26px, 4.4vw, 48px) * 1.25);
  line-height: 1.1;
  text-align: right;
  overflow: visible;
  word-break: break-all;
}

.KALKULATOR_KLAWIATURA {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 6px;
}
.KALKULATOR_KLAWIATURA button {
  box-sizing: border-box;
  min-width: 0;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: clamp(30px, 6vh, 48px);
  border-radius: 10px;
  border: 1px solid var(--TLO-PANEL);
  background: var(--TLO-PRZYCISK);
  color: var(--AKCENT-TEKST);
  text-decoration: none;
  font-family: 'Poppins', 'Montserrat', sans-serif;
  font-weight: 400;
  font-size: calc(clamp(14px, 3.2vw, 28px) * 1.25);
  letter-spacing: 0.6px;
  -webkit-tap-highlight-color: transparent;
  transition: color .12s ease, transform .06s ease, background-color .12s ease;
}
.KALKULATOR_KLAWIATURA button:hover { background: var(--TLO-PANEL); transform: translateY(-1px); }
.KALKULATOR_KLAWIATURA button:active { transform: translateY(0); }

.KALKULATOR_KLAWIATURA button[data-cyfra]       { color: var(--TEKST-PRZYCISK) !important; }
.KALKULATOR_KLAWIATURA button[data-cyfra]:hover { color: var(--AKCENT-TEKST) !important; }

.KALKULATOR_KLAWIATURA button:not([data-cyfra]):hover { color: #9E9E9E !important; }

:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_WIDOK { background: var(--TLO-PRZYCISK); }


:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_WIDOK {
  background: var(--TLO-PRZYCISK) !important;
  border-color: var(--TLO-PANEL) !important;
}
:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_EKRAN,
:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_LOG_LINIA {
  color: var(--TEKST-PRZYCISK) !important;
}
:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_KLAWIATURA button {
  background: var(--TLO-PRZYCISK) !important;
  border-color: var(--TLO-PANEL) !important;
  color: var(--TEKST-PRZYCISK) !important;
}
:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_KLAWIATURA button:hover {
  background: var(--TLO-PANEL) !important;
  color: #9E9E9E !important;
}

:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_KLAWIATURA button[data-cyfra]:hover {
  color: #9E9E9E !important;
}

:root[WYBOR_MOTYW="JASNY"] .KALKULATOR_KLAWIATURA button:not([data-cyfra]):hover {
  color: #9E9E9E !important;
}

/* Montserrat font + reset spacing for buttons */
.KALKULATOR_KLAWIATURA button {
    font-family: 'Montserrat', sans-serif !important;
    margin: 0 !important;
    padding: 0 !important;
    gap: 0 !important;
    border: 0 !important;
    line-height: 1 !important;
    letter-spacing: 0 !important;
    overflow: hidden !important;
    font-size: calc(100% * 1.25) !important;

}

/* === Montserrat + zero spacing + height-tied font (KALKULATOR) === */
.KALKULATOR_KLAWIATURA button {
  font-family: 'Montserrat', sans-serif !important;
  /* zero wszelkich przeszkód */
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
  border: 0 !important;
  letter-spacing: 0 !important;
  line-height: 1 !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: clip !important;
  /* pozwól używać cqb/cqi względem własnego boxa */
  container-type: size;
  /* wielkość czcionki = 95% wysokości przycisku */
  font-size: 16cqb !important;
}

/* Ensure header back button is visible and readable */

/* Unified PRZYBORNIK button in calculator header */
.KALKULATOR_NAGLOWEK .PRZYCISK_PRZYBORNIK_POWROT {
  font-family: 'Montserrat', sans-serif !important;
  margin: 0 !important;
  padding: 0 !important;
  min-height: 64px !important; /* match PRZYBORNIK grid button height */
  border: 1px solid var(--TLO-PANEL);
  background: var(--TLO-PRZYCISK);
  color: var(--TEKST-PRZYCISK);
  letter-spacing: 0 !important;
  line-height: 1 !important;
  white-space: nowrap !important;
  overflow: hidden !important;
  font-size: 16cqb !important;
  container-type: size;
}

/* Wyśrodkowanie tekstu i brak zbędnych odstępów */
button, .PRZYCISK, .PRZYCISK_PRZYBORNIK_POWROT, .PRZYCISK_KLAWISZ, .PRZYCISK--KLAWISZ {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 0 !important;
  margin: 0 !important;
  gap: 0 !important;
  line-height: 1 !important;
}

/* === FIX: identyczny hover jak w PRZYBORNIKU === */
.PRZYCISK_PRZYBORNIK_POWROT:hover {
  color: var(--AKCENT-TEKST);
  background: var(--TLO-PANEL);
  transform: translateY(-1px);
}
.PRZYCISK_PRZYBORNIK_POWROT:active { transform: translateY(0); }

/* === SAFE: jeśli w DOM pojawiły się span.LABEL_SKALUJ — nie przechwytuj kliknięć === */
.LABEL_SKALUJ{ pointer-events: none !important; }
